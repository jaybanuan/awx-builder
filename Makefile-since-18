##############################################################################
# Targets

.PHONY: build-impl
build-impl:
	pip3 install -U requests urllib3
	pip3 install docker-compose ansible "setuptools_scm[toml]"
	docker image ls
	$(MAKE) -C awx-${AWX_BRANCH_NAME} docker-compose-build
	docker image ls


.PHONY: build-ui-impl
build-ui-impl:
	docker exec tools_awx_1 make clean-ui ui-devel
	docker exec -ti tools_awx_1 awx-manage createsuperuser


.PHONY: up-impl
up-impl: check_awx_branch_name
	$(MAKE) -C awx-${AWX_BRANCH_NAME} docker-compose


.PHONY: down-impl
down-impl: check_awx_branch_name
	cd $(AWX_SRC_DIR)/tools/docker-compose/_sources; docker-compose down


.PHONY: start-impl
start-impl:
	cd $(AWX_SRC_DIR)/tools/docker-compose/_sources; docker-compose start


.PHONY: stop-impl
stop-impl:
	cd $(AWX_SRC_DIR)/tools/docker-compose/_sources; docker-compose stop
